
  jenkins:
    restart: always
    build:
      context: ./jenkins
      args:
        - external_mounts_path=$external_mounts_path
        - jenkins_home_path=$jenkins_home_path
    container_name: jenkins
    expose:
      - "8080"
    ports:
      - "$jenkins_port:8080"
    depends_on:
      - gitlab
    volumes:
      - ./jenkins/mounts:$external_mounts_path
      - ./jenkins/conf:/var/jenkins_home
    environment:
      - jenkins_user=$jenkins_user
      - jenkins_pass=$jenkins_pass
      - jenkins_home_path=$jenkins_home_path
      - external_mounts_path=$external_mounts_path
      - jenkins_add_credential_filename=$jenkins_add_credential_filename
      - gitlab_port=$gitlab_port
    stdin_open: true
    tty: true

  docserver:
    restart: always
    build: ./docserver
    container_name: docserver
    expose:
      - 3000
    ports:
      - "$docserver_port:3000"
    volumes:
      - ./docserver/mounts:$external_mounts_path
    stdin_open: true
    tty: true
Started by user [8mha:////4CvYH+c/CbmZ2nBbXPT0w5JIc+S/i0LTH5IgBcBEzQZgAAAAlh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyWEgYu/dLi1CL9ovz8EgDKVWzSvwAAAA==[0mroot
Building in workspace /var/jenkins_home/workspace/button
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url http://root@gitlab:30080/components/button.git # timeout=10
Fetching upstream changes from http://root@gitlab:30080/components/button.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --progress http://root@gitlab:30080/components/button.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision d5b240ed79b7c5e6785932e8f652077f0f848a05 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f d5b240ed79b7c5e6785932e8f652077f0f848a05
Commit message: "Add readme.md"
 > git rev-list --no-walk d5b240ed79b7c5e6785932e8f652077f0f848a05 # timeout=10
[button] $ /bin/sh -xe /tmp/jenkins5081658885181890322.sh
+ cat /var/external-common-mounts/spb-builder/extract-doc.js

var path = require('path')
var fs = require('fs')
var shell = require('shell')

// 接受的参数
var args = process.argv.slice(2)

// 提交的项目代码路径
var workdir = args[0]
console.log(`项目代码路径: ${workdir}`)

var builderJsonPath = `${workdir}/.builder.json`
var builderJsonContentString = fs.readFileSync(builderJsonPath, 'utf-8')

var builderJson = JSON.parse(builderJsonContentString)

// docs
if (builderJson.doc) {
  var docModel = builderJson.doc
  var res = shell.exec(`curl http://doc-server:3000/add?type=${docModel.type}&author=${docModel.author}&keywords=${docModel.keywords}`)
  console.log(res)
}
+ pwd
+ node /var/external-common-mounts/spb-builder/extract-doc.js /var/jenkins_home/workspace/button
/tmp/jenkins5081658885181890322.sh: 3: /tmp/jenkins5081658885181890322.sh: node: not found
Build step 'Execute shell' marked build as failure
Finished: FAILURE
